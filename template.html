<!doctype html>
<html>

<head>
    <link href="//fonts.googleapis.com/css?family=Avenir" rel="stylesheet" />
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="container pt-2 pb-2">
        <div class="d-flex justify-content-between">
            <div>
                <img src="images/logo.png" style="height: 50px;" />
                <img src="images/logo-text.png" style="height: 29px;" />
            </div>
            <div class="navbar navbar-expand navbar-quicklinks pr-0">
                <ul class="navbar-nav justify-content-between">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><img src="images/language.svg" />عربي</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><img src="images/contact-us.svg" />CONTACT US</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><img src="images/help.svg" />HELP</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><img src="images/tree-view.svg" />SITEMAP</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-danger text-white btn-login rounded-pill" href="#"><img
                                src="images/user-avatar.svg" />Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="navbar navbar-expand navbar-main">
        <div class="container d-flex justify-content-between">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <img src="images/home.svg" />
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="about-ministry.html">About Ministry</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link text-white" href="ministry-services.html">Ministry Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="e-participation.html">e-Participation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="knowledge.html">Knowledge Section</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="media.html">Media Section</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="open-data.html">Open Data</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="economic-substance.html">Economic Substance</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="jobs.html">Jobs</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container breadcrumbs pt-3">
        e-Services | &lt;Service Category Name&gt; | &lt;Service Name&gt;
    </div>
    <div class="container toolbar pt-3">
        <img src="images/toolbar.png" />
    </div>
    <div class="container service">
        <div class="service-header d-flex justify-content-between align-items-center mt-4">
            <div>
                <h3 class="service-title text-white m-0 pb-1"></h3>
                <p class="service-description text-white m-0"></p>
            </div>
            <div>
                <button class="btn btn-service-header btn-white">My Applications</button>
                <button class="btn btn-service-header btn-red ml-3">New Application</button>
            </div>
        </div>
        <div class="d-flex justify-content-between mt-4">
            <div class="service-section-left">
                <div class="service-section service-fees">
                    <h4><img src="images/money.svg" />Fees</h4>
                    <p class="service-fees-value">10000 Dhs .( pay through E-dirhams)</p>
                </div>
                <div class="service-section service-procedures mt-5">
                    <h4 class="d-flex justify-content-between">
                        <span><img src="images/service-procedures.svg" />Service Procedures</span>
                        <div class="service-procedure-buttons-container">
                            <button class="btn btn-red">Procedures</button><button
                                class="btn btn-white red-border">Workflow diagram</button>
                        </div>
                    </h4>
                    <div class="service-procedure-steps">
                        <ul class="list-group">
                        </ul>
                    </div>
                </div>
            </div>
            <div class="service-section-right">
                <ul class="list-group">
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 target-audience">
                        <div class="d-flex align-items-start">
                            <img src="images/target-audience.svg" />
                            <div>
                                <h5 class="service-param mb-0">Target Audience</h5>
                                <p class="service-param-value target-audience-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 user-registration">
                        <div class="d-flex align-items-start">
                            <img src="images/registration.svg" />
                            <div>
                                <h5 class="service-param mb-0">User Registration Required</h5>
                                <p class="service-param-value user-registration-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 expected-duration">
                        <div class="d-flex align-items-start">
                            <img src="images/calendar.svg" />
                            <div>
                                <h5 class="service-param mb-0">The Expected Duration for Service Delivery</h5>
                                <p class="service-param-value expected-duration-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 service-locations">
                        <div class="d-flex align-items-start">
                            <img src="images/location.svg" />
                            <div>
                                <h5 class="service-param mb-0">Locations Of Service</h5>
                                <p class="service-param-value service-locations-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 customer-service-center">
                        <div class="d-flex align-items-start">
                            <img src="images/headset.svg" />
                            <div>
                                <h5 class="service-param mb-0">Customer Service Center</h5>
                                <p class="service-param-value customer-service-center-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 administrator">
                        <div class="d-flex align-items-start">
                            <img src="images/user-admin.svg" />
                            <div>
                                <h5 class="service-param mb-0">Administrator</h5>
                                <p class="service-param-value administrator-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 no-of-users">
                        <div class="d-flex align-items-start">
                            <img src="images/user-multiple.svg" />
                            <div>
                                <h5 class="service-param mb-0">Number of Service Users</h5>
                                <p class="service-param-value no-of-users-value">
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item border-0 bg-transparent pl-0 pt-0 service-url">
                        <div class="d-flex align-items-start">
                            <img src="images/link.svg" />
                            <div>
                                <h5 class="service-param mb-0">Service URL</h5>
                                <p class="service-param-value">
                                    <a class="link-red service-url-value"></a>
                                </p>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="service-section required-documents mt-4">
            <h4><img src="images/document.svg" />Required Documents</h4>
            <ul class="list-group mt-3 flex-row flex-wrap">
            </ul>
        </div>
        <div class="service-section conditions mt-5">
            <h4><img src="images/document-tasks.svg" />Conditions And Requirements</h4>
            <ul class="list-group mt-3">
            </ul>
        </div>
    </div>
    <div class="container mt-5">
        <button class="btn btn-service-header btn-white red-border">My Applications</button>
        <button class="btn btn-service-header btn-red ml-3">New Application</button>
    </div>

    <div class="navbar-footer navbar-footer-fake-image d-flex justify-content-center">
        <img src="images/Footer.svg" />
    </div>

    <script type="text/template" id="procedureTemplate">
        <li class="list-group-item border-0 p-3 procedure-step"><span></span></li>
    </script>
    <script type="text/template" id="documentTemplate">
        <li class="list-group-item border-0 p-0 pr-3">
            <div class="d-flex align-items-start">
                <img src="images/checkbox-checked.svg" />
                <div>
                    <h5 class="document-param mb-0"></h5>
                    <p class="document-param-value">
                    </p>
                </div>
            </div>
        </li>
    </script>
    <script type="text/template" id="conditionTemplate">
        <li class="list-group-item border-0 p-0 pb-3">
            <img src="images/checkmark.svg" /><span class="condition-value">Submit the application online</span>
        </li>
    </script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        (function () {
            function getData() {
                return new Promise(function (resolve, reject) {
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            resolve(JSON.parse(xhttp.responseText));
                        }
                    };
                    xhttp.open("GET", "data.json", true);
                    xhttp.send();
                });
            }

            function getQueryParameters() {
                var search = location.search.substring(1);
                return JSON.parse('{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}');
            }

            function renderServiceData(data) {
                $('.service-title').text(data.service);
                $('.service-description').text(data.serviceDescription);
                $('.target-audience-value').text(data.targetAudience)
                $('.user-registration-value').text(data.userRegistrationRequired);
                $('.expected-duration-value').text(data.duration);
                $('.service-locations-value').text(data.locationsOfService);
                $('.customer-service-center-value').text(data.customerService);
                $('.administrator-value').text(data.administrator);
                $('.no-of-users-value').text(data.noOfServiceUsers);
                $('.service-url-value').text(data.serviceUrl);

                //procedures
                var $procedureUl = $('.service-procedure-steps ul');
                var $stepTemplate = $($('#procedureTemplate').html());
                for (var i = 0; i < data.procedure.length; i++) {
                    var $stepEl = $stepTemplate.clone();
                    var step = data.procedure[i];

                    $stepEl.text(step);

                    $procedureUl.append($stepEl);
                }

                //documents
                var $documentsUl = $('.required-documents ul')
                var $docTemplate = $($('#documentTemplate').html());
                for (var i = 0; i < data.documents.length; i++) {
                    var doc = data.documents[i];
                    var parts = doc.split(',');
                    var $docEl = $docTemplate.clone();

                    $('.document-param', $docEl).text(parts[0]);
                    $('.document-param-value', $docEl).text(parts[1]);

                    $documentsUl.append($docEl);
                }

                //conditions
                var $conditionsUl = $('.conditions ul')
                var $conditionTemplate = $($('#conditionTemplate').html());
                var conditions = data.conditions.split('.');
                for (var i = 0; i < conditions.length; i++) {
                    var condition = conditions[i];
                    if (condition) {
                        var $conditionEl = $conditionTemplate.clone();

                        $('.condition-value', $conditionEl).text(condition);

                        $conditionsUl.append($conditionEl);
                    }
                }
            }

            getData()
                .then(function (data) {
                    var queryParams = getQueryParameters();
                    var service = data.find(function (e) { return e.serviceId == queryParams.serviceId && e.serviceCategory == queryParams.serviceCategory; });

                    if (service) {
                        renderServiceData(service);
                    }
                });
        })();
    </script>
</body>

</html>